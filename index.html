

<link rel="stylesheet" href="style.css">

<style>

.objectParallax {
  position: absolute;

  --objectPara-x: 0px;
  --objectPara-y: 0px;
  --parallax-y: 0px;
  --z-depth: 1;

  --object-width: auto;
  --object-height: auto;

  left: var(--objectPara-x);
  top: var(--objectPara-y);

  width: var(--object-width);
  height: var(--object-height);

  transform: translateX(-50%) translateY(var(--parallax-y));

  will-change: transform;
  z-index: calc(var(--z-depth));
}

.objectParallax img {
  width: 100%;
  height: 100%;
  object-fit: contain; /* atau cover */
}

/* Variasi depth saja */
.parallaxBack-1  {
    --z-depth: -3;
}
.parallaxBack-2  {
    --z-depth: -5;
}
.parallaxFront-1 {
    --z-depth: 1; 
}
.parallaxFront-2 {
    --z-depth: 0.9;
}

.object-test-01{
  --objectPara-x: 60%;
  --objectPara-y: 1700px;
  --object-width: 300px;
  --object-height: 300px;
}

.object-test-02 {
  --objectPara-x: 75%;
  --objectPara-y: 1900px;

  --object-width: 600px;
  --object-height: 600px;
}

</style>

<body>
    <div class="background-world">
        <img src="background/bg.png"/>
    </div>

    <div class="bg-main bg-depth-0">
        <img src="svg/art-background.svg"/>
    </div>

    <div class="object-test-02 objectParallax parallaxFront-1"><img src="test-parallax.png"/></div>
    <div class="object-test-01 objectParallax parallaxBack-1"><img src="test-parallax.png"/></div>

</body>

<script>
    const objects = document.querySelectorAll('.objectParallax');
    let window_h = window.innerHeight;

    function updateParallax() {
    const scrollY = window.scrollY;
    const vpy_window = window_h / 2;

    objects.forEach(obj => {
        const css = getComputedStyle(obj);
        const objectPara_y = parseFloat(css.getPropertyValue('--objectPara-y'));
        const depth = parseFloat(css.getPropertyValue('--z-depth'));

        // rumus parallax
        const parallax_offset = (objectPara_y - (scrollY + vpy_window)) / depth;

        obj.style.setProperty('--parallax-y', `${parallax_offset}px`);
    });
    }

    function loop() {
    updateParallax();
    requestAnimationFrame(loop);
    }
    loop();

    window.addEventListener('resize', () => {
    window_h = window.innerHeight;
    });


</script>